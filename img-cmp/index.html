<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image Compare</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Syne:wght@700;800&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
–bg: #0a0a0a;
–surface: #141414;
–border: #2a2a2a;
–accent: #e8ff4d;
–text: #f0f0f0;
–muted: #666;
}

body {
background: var(–bg);
color: var(–text);
font-family: ‘DM Mono’, monospace;
min-height: 100dvh;
display: flex;
flex-direction: column;
}

header {
padding: 1rem 1.5rem;
display: flex;
align-items: center;
justify-content: space-between;
border-bottom: 1px solid var(–border);
flex-shrink: 0;
}

.logo {
font-family: ‘Syne’, sans-serif;
font-weight: 800;
font-size: 1.1rem;
letter-spacing: -0.02em;
}

.logo span { color: var(–accent); }

.config-btn {
background: none;
border: 1px solid var(–border);
color: var(–muted);
font-family: ‘DM Mono’, monospace;
font-size: 0.75rem;
padding: 0.4rem 0.8rem;
cursor: pointer;
transition: all 0.2s;
letter-spacing: 0.05em;
}

.config-btn:hover {
border-color: var(–accent);
color: var(–accent);
}

/* Config panel */
.config-panel {
background: var(–surface);
border-bottom: 1px solid var(–border);
padding: 1.25rem 1.5rem;
display: none;
gap: 1rem;
flex-direction: column;
}

.config-panel.open { display: flex; }

.config-row {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 0.75rem;
}

@media (max-width: 600px) {
.config-row { grid-template-columns: 1fr; }
}

.input-group {
display: flex;
flex-direction: column;
gap: 0.3rem;
}

.input-group label {
font-size: 0.65rem;
color: var(–muted);
letter-spacing: 0.1em;
text-transform: uppercase;
}

.input-group input {
background: var(–bg);
border: 1px solid var(–border);
color: var(–text);
font-family: ‘DM Mono’, monospace;
font-size: 0.8rem;
padding: 0.5rem 0.75rem;
outline: none;
transition: border-color 0.2s;
width: 100%;
}

.input-group input:focus { border-color: var(–accent); }

.apply-btn {
background: var(–accent);
border: none;
color: #000;
font-family: ‘Syne’, sans-serif;
font-weight: 700;
font-size: 0.85rem;
padding: 0.6rem 1.5rem;
cursor: pointer;
align-self: flex-start;
letter-spacing: 0.02em;
transition: opacity 0.2s;
}

.apply-btn:hover { opacity: 0.85; }

/* Main comparison area */
main {
flex: 1;
display: flex;
align-items: center;
justify-content: center;
padding: 1.5rem;
min-height: 0;
}

.compare-wrap {
position: relative;
width: 100%;
max-width: 1200px;
aspect-ratio: 16/9;
overflow: hidden;
cursor: ew-resize;
user-select: none;
background: var(–surface);
border: 1px solid var(–border);
}

@media (max-width: 600px) {
.compare-wrap { aspect-ratio: 4/3; }
}

.img-base, .img-overlay {
position: absolute;
inset: 0;
width: 100%;
height: 100%;
}

.img-base img, .img-overlay img {
width: 100%;
height: 100%;
object-fit: contain;
display: block;
}

.img-overlay {
clip-path: inset(0 50% 0 0);
transition: clip-path 0s;
}

/* Divider */
.divider {
position: absolute;
top: 0;
bottom: 0;
width: 2px;
background: var(–accent);
left: 50%;
transform: translateX(-50%);
pointer-events: none;
z-index: 10;
}

.divider-handle {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
width: 44px;
height: 44px;
background: var(–accent);
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
pointer-events: none;
}

.divider-handle svg { width: 20px; height: 20px; }

/* Labels */
.label {
position: absolute;
top: 1rem;
background: rgba(0,0,0,0.75);
backdrop-filter: blur(4px);
color: var(–text);
font-size: 0.7rem;
letter-spacing: 0.08em;
padding: 0.3rem 0.6rem;
pointer-events: none;
z-index: 5;
max-width: 40%;
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap;
}

.label-a { left: 1rem; }
.label-b { right: 1rem; text-align: right; }

/* Empty state */
.empty-state {
position: absolute;
inset: 0;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
gap: 0.75rem;
color: var(–muted);
font-size: 0.85rem;
text-align: center;
padding: 2rem;
}

.empty-state .big {
font-family: ‘Syne’, sans-serif;
font-size: 1.5rem;
font-weight: 800;
color: var(–border);
letter-spacing: -0.02em;
}

/* Loading */
.loading-indicator {
position: absolute;
inset: 0;
display: flex;
align-items: center;
justify-content: center;
background: var(–surface);
z-index: 20;
font-size: 0.75rem;
color: var(–muted);
letter-spacing: 0.1em;
}

@keyframes pulse { 0%,100%{opacity:.4} 50%{opacity:1} }
.loading-indicator { animation: pulse 1.5s infinite; }
</style>

</head>
<body>

<header>
  <div class="logo">IMG<span>·</span>CMP</div>
  <button class="config-btn" onclick="toggleConfig()">⚙ CONFIGURE</button>
</header>

<div class="config-panel" id="configPanel">
  <div class="config-row">
    <div class="input-group">
      <label>Image A URL</label>
      <input type="url" id="urlA" placeholder="https://example.com/before.jpg">
    </div>
    <div class="input-group">
      <label>Image B URL</label>
      <input type="url" id="urlB" placeholder="https://example.com/after.jpg">
    </div>
  </div>
  <button class="apply-btn" onclick="applyUrls()">APPLY →</button>
</div>

<main>
  <div class="compare-wrap" id="compareWrap">
    <div class="empty-state" id="emptyState">
      <div class="big">COMPARE</div>
      <div>Open ⚙ Configure and enter two image URLs<br>or pass <code>?a=URL&b=URL</code> in the address bar</div>
    </div>

```
<div class="img-base" id="imgBase" style="display:none">
  <img id="imgA" alt="Image A" draggable="false">
</div>
<div class="img-overlay" id="imgOverlay" style="display:none">
  <img id="imgB" alt="Image B" draggable="false">
</div>

<div class="divider" id="divider" style="display:none">
  <div class="divider-handle">
    <svg viewBox="0 0 20 20" fill="none">
      <path d="M7 4L3 10L7 16M13 4L17 10L13 16" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>
</div>

<div class="label label-a" id="labelA" style="display:none">A</div>
<div class="label label-b" id="labelB" style="display:none">B</div>
```

  </div>
</main>

<script>
  let pos = 0.5;
  let dragging = false;

  const wrap = document.getElementById('compareWrap');
  const overlay = document.getElementById('imgOverlay');
  const divider = document.getElementById('divider');

  function setPosition(x) {
    const rect = wrap.getBoundingClientRect();
    pos = Math.max(0.02, Math.min(0.98, (x - rect.left) / rect.width));
    const pct = (pos * 100).toFixed(2);
    overlay.style.clipPath = `inset(0 ${(100 - pos * 100).toFixed(2)}% 0 0)`;
    divider.style.left = pct + '%';
  }

  wrap.addEventListener('mousedown', e => { dragging = true; setPosition(e.clientX); });
  document.addEventListener('mousemove', e => { if (dragging) setPosition(e.clientX); });
  document.addEventListener('mouseup', () => dragging = false);

  wrap.addEventListener('touchstart', e => { dragging = true; setPosition(e.touches[0].clientX); }, {passive: true});
  document.addEventListener('touchmove', e => { if (dragging) setPosition(e.touches[0].clientX); }, {passive: true});
  document.addEventListener('touchend', () => dragging = false);

  function toggleConfig() {
    document.getElementById('configPanel').classList.toggle('open');
  }

  function applyUrls() {
    const a = document.getElementById('urlA').value.trim();
    const b = document.getElementById('urlB').value.trim();
    if (!a || !b) { alert('Please enter both URLs.'); return; }
    const url = new URL(location.href);
    url.searchParams.set('a', a);
    url.searchParams.set('b', b);
    history.replaceState(null, '', url.toString());
    loadImages(a, b);
    document.getElementById('configPanel').classList.remove('open');
  }

  function loadImages(a, b) {
    const empty = document.getElementById('emptyState');
    const base = document.getElementById('imgBase');
    const overlayEl = document.getElementById('imgOverlay');
    const imgA = document.getElementById('imgA');
    const imgB = document.getElementById('imgB');
    const lA = document.getElementById('labelA');
    const lB = document.getElementById('labelB');

    empty.style.display = 'none';
    base.style.display = 'block';
    overlayEl.style.display = 'block';
    divider.style.display = 'block';
    lA.style.display = 'block';
    lB.style.display = 'block';

    imgA.src = a;
    imgB.src = b;

    // Labels from URL
    try { lA.textContent = new URL(a).pathname.split('/').pop() || 'A'; } catch { lA.textContent = 'A'; }
    try { lB.textContent = new URL(b).pathname.split('/').pop() || 'B'; } catch { lB.textContent = 'B'; }

    // Reset position
    setPosition(wrap.getBoundingClientRect().left + wrap.getBoundingClientRect().width * 0.5);
  }

  // Init from query params
  function init() {
    const params = new URLSearchParams(location.search);
    const a = params.get('a');
    const b = params.get('b');
    if (a && b) {
      document.getElementById('urlA').value = a;
      document.getElementById('urlB').value = b;
      // Wait for layout
      requestAnimationFrame(() => loadImages(a, b));
    }
  }

  init();
</script>

</body>
</html>